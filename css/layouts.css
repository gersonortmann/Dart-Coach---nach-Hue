/* =========================================
   LAYOUTS
   Struktur der Screens: Dashboard, Setup, Mgmt
   ========================================= */

/* --------------------------------------------------
   GLOBAL CONTAINER FIX
   -------------------------------------------------- */
.setup-main-container,
.mgmt-container,
.stats-container-width,
#result-container {
    width: 100%; 
    max-width: 1400px; /* Synchron mit main in base.css */
    margin: 0 auto;
    box-sizing: border-box;
    padding: 0 var(--gap-xs); /* Kleiner Puffer auf Mobile */
}

/* --------------------------------------------------
   1. DASHBOARD GRID (Startseite)
   -------------------------------------------------- */
.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--gap-lg);
    width: 100%; 
    min-height: 120px;
    max-width: 800px; 
    margin: var(--gap-lg) auto 0 auto;
}

/* Tablet & Desktop */
@media (min-width: 768px) {
    .dashboard-grid { grid-template-columns: 1fr 1fr; }
}

/* --------------------------------------------------
   2. GAME SELECTOR
   -------------------------------------------------- */
#game-selector-grid {
    display: grid; grid-template-columns: 1fr; 
    gap: var(--gap-md); padding-bottom: var(--gap-xl); 
    width: 100%; max-width: 1000px; margin: 0 auto;
}

.game-card {
    height: 100%; min-height: 120px; display: flex; align-items: center;
    padding: var(--gap-md); gap: var(--gap-md);
}

/* Desktop Grid Layout für Spiele */
@media (min-width: 1024px) {
    #game-selector-grid { grid-template-columns: repeat(6, 1fr); }
    
    /* Grid Spanning Logik */
    #game-selector-grid .dashboard-card { grid-column: span 2; }
    
    #game-selector-grid .game-card-warmup { grid-row: 1; grid-column: 3 / span 2; }
    #game-selector-grid .game-card-aroundclock { grid-row: 2; grid-column: 1 / span 2; }
    #game-selector-grid .game-card-singletraining { grid-row: 2; grid-column: 3 / span 2; }
    #game-selector-grid .game-card-shanghai { grid-row: 2; grid-column: 5 / span 2; }
    #game-selector-grid .game-card-catch40 { grid-row: 3; grid-column: 2 / span 2; }
    #game-selector-grid .game-card-bobs27 { grid-row: 3; grid-column: 4 / span 2; }
    #game-selector-grid .game-card-x01 { grid-row: 4; grid-column: 3 / span 2; }
}

/* --------------------------------------------------
   3. SETUP SCREEN
   -------------------------------------------------- */
.setup-header-row {
    width: 100%; max-width: 1400px;
    display: flex; justify-content: center; align-items: center; 
    position: relative; margin-bottom: var(--gap-md);
}

.setup-main-container { display: flex; flex-direction: column; gap: var(--gap-lg); }

.setup-row-players {
    display: grid; grid-template-columns: 1fr; gap: var(--gap-lg); 
    height: 200px; min-height: 170px;
}
@media (min-width: 768px) {
    .setup-row-players { grid-template-columns: 1fr 1fr; }
}

.setup-col {
    background: var(--bg-panel); border: 1px solid var(--border-default);
    border-radius: 10px; padding: var(--gap-md); 
    display: flex; flex-direction: column; overflow: hidden; 
}
.setup-col.active-col { border-color: var(--border-hover); background: var(--bg-input); }

.col-header {
    flex-shrink: 0; font-size: 0.9rem; text-transform: uppercase; color: var(--text-muted);
    letter-spacing: 1px; margin-bottom: var(--gap-sm); border-bottom: 1px solid var(--border-default); 
    padding-bottom: 5px; display: flex; justify-content: space-between; align-items: center;
}
.player-list-scrollable { flex: 1; overflow-y: auto; padding-right: 5px; }

.setup-row-options {
    background: var(--bg-panel); border: 1px solid var(--border-default);
    border-radius: 10px; padding: var(--gap-lg); margin-bottom: var(--gap-lg);
}
.opt-group-big { margin-bottom: var(--gap-lg); }
.opt-label-big { 
    display: block; color: var(--text-muted); font-size: 0.8rem; 
    text-transform: uppercase; margin-bottom: var(--gap-xs); letter-spacing: 1px;
}
.opt-row-big { display: flex; gap: var(--gap-sm); flex-wrap: wrap; }
.opt-switch-row-big { display: flex; gap: var(--gap-md); width: 100%; }


/* --------------------------------------------------
   4. MANAGEMENT SCREEN
   -------------------------------------------------- */
.mgmt-container {
    display: flex; flex-direction: column; gap: var(--gap-lg);
    flex: 1; min-height: 0;
}
@media (min-width: 768px) {
    .mgmt-container { flex-direction: row; }
}

.mgmt-card {
    background: var(--bg-panel); border: 1px solid var(--border-default);
    border-radius: 15px; padding: var(--gap-lg); display: flex; flex-direction: column;
    box-shadow: var(--shadow-sm);
}
.mgmt-list-panel { flex: 1; min-width: 280px; overflow: hidden; }
.mgmt-details-panel { flex: 2; overflow: hidden; opacity: 1; transition: opacity 0.2s; }
.hidden-panel { opacity: 0.5; pointer-events: none; }

.mgmt-header-action { border-bottom: 1px solid var(--border-default); padding-bottom: var(--gap-md); margin-bottom: var(--gap-md); flex-shrink: 0; }
.mgmt-section { margin-bottom: var(--gap-lg); flex-shrink: 0; }
.scroll-list { flex: 1; overflow-y: auto; padding-right: 5px; }
.history-list-container { flex: 1; overflow-y: auto; border-top: 1px solid var(--border-default); padding-top: var(--gap-md); }


/* --------------------------------------------------
   5. STATS & HERO CARDS
   -------------------------------------------------- */
.stats-container-width { display: flex; flex-direction: column; gap: var(--gap-lg); }
.stats-filter-row { display: flex; flex-direction: row; gap: var(--gap-sm); width: 100%; }
@media (max-width: 600px) { .stats-filter-row { flex-direction: column; } }

/* --- HERO CARD GRID --- */
.stats-hero-grid {
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Fallback Mobile */
    gap: var(--gap-lg); width: 100%; margin-bottom: var(--gap-xl); padding: 0 5px; box-sizing: border-box;
}

@media (min-width: 1024px) {
    .stats-hero-grid {
        /* Desktop: 4 Spalten erzwingen */
        grid-template-columns: repeat(4, 1fr);
    }
}

/* --- RESULT LAYOUTS --- */
.grid-triple-result {
    display: grid; grid-template-columns: 1fr; 
    gap: var(--gap-lg); width: 100%; margin-bottom: var(--gap-lg); align-items: stretch;
}
@media (min-width: 1024px) {
    .grid-triple-result { grid-template-columns: 2fr 2fr 1fr; }
}

/* Fix für Chart Höhen */
.grid-triple-result .chart-wrapper-big,
.grid-triple-result .heatmap-container,
.grid-triple-result .score-distribution {
    height: 400px; min-height: 400px;
    margin: 0; display: flex; flex-direction: column; justify-content: center;
}
.grid-triple-result .chart-wrapper-big canvas { max-height: 350px; }
.grid-triple-result .heatmap-container .dartboard-svg { max-height: 320px; width: auto; }
.grid-triple-result .score-distribution { justify-content: flex-start; padding-top: 30px; }

@media (max-width: 1023px) {
    .grid-triple-result { grid-template-columns: 1fr; height: auto; }
    .grid-triple-result .chart-wrapper-big,
    .grid-triple-result .heatmap-container,
    .grid-triple-result .score-distribution {
        height: 350px; min-height: 350px;
    }
}

.grid-x01-layout {
    display: grid; grid-template-columns: 1fr; gap: var(--gap-lg); margin-bottom: var(--gap-lg);
}
@media (min-width: 1024px) {
    .grid-x01-layout { grid-template-columns: 2fr 1.3fr 0.7fr; }
}